(jbuild_version 1)

(library
  (
    (name libexecution)
    (flags (-warn-error (+A) -opaque))
    (preprocess (pps (ppx_bin_prot
                      ppx_compare
                      ppx_deriving.std
                      ppx_deriving_yojson
                      ppx_pipebang)))
    (libraries (
                ; note that libtarget.{ocaml,js} are not included here
                libtarget
                libcommon
                core_kernel
                uuidm
                base64
                uri

                ; We don't include the ppx_bin_prot derivers, as they're not
                ; used in js_of_ocaml, and they add an extra 800k to the
                ; js_of_ocaml output. They are included in libbackend, which
                ; provides what they linker needs.

                ppx_derivers
                ppx_deriving.std
                ppx_deriving_yojson
                ppx_deriving_yojson.runtime))
  )
)


